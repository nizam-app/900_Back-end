{
	"info": {
		"_postman_id": "fsm-api-collection-2025-v5",
		"name": "FSM System API - Complete Collection (Dec 9, 2025)",
		"description": "ðŸŽ‰ **MAJOR UPDATE - December 9, 2025**\n\n## ðŸ†• What's New Today:\n\n### 1ï¸âƒ£ Payout Management System âœ…\n**Added:** Complete payout management for admin dashboard\n- `GET /api/payouts/summary` - Dashboard overview\n- `GET /api/payouts/pending-commissions` - List pending commissions/bonuses\n- `GET /api/payouts/early-requests` - Early payout requests\n- `POST /api/payouts/batches` - Create weekly payout batch\n- `GET /api/payouts/batches` - List payout batches\n- `GET /api/payouts/history` - Completed payout history\n- `PATCH /api/payouts/batches/:id/process` - Process batch\n- `PATCH /api/payouts/early-requests/:id/approve` - Approve early payout\n- `PATCH /api/payouts/early-requests/:id/reject` - Reject early payout\n- Weekly batches automatically scheduled for Mondays\n- Early payout request approval workflow\n\n### 2ï¸âƒ£ Technician Management System âœ…\n**Added:** Complete technician management for admin\n- `GET /api/technicians/overview` - Statistics & distribution\n- `GET /api/technicians/directory` - List with filters\n- `GET /api/technicians/:id` - Detailed profile\n- `POST /api/technicians` - Create new technician\n- `PATCH /api/technicians/:id` - Update technician\n- `PATCH /api/technicians/:id/block` - Block/unblock\n- `PATCH /api/technicians/:id/documents` - Upload documents\n- `GET /api/technicians/export` - Export to CSV\n- Supports both freelancers and employees\n- Document upload (photo, ID, permits, degrees)\n- Comprehensive filtering and search\n\n### 3ï¸âƒ£ Recent Services API âœ…\n**Added:** Customer dashboard endpoint\n- `GET /api/sr/recent` - Recent completed services\n- Shows last 5 services with completion status\n- Optimized for customer dashboard UI\n\n### 4ï¸âƒ£ Schema Improvements âœ…\n**Updated:** Category model\n- Added `image` field to categories\n- Migration applied successfully\n- Seed data updated with image URLs\n\n### 5ï¸âƒ£ Bug Fixes âœ…\n**Fixed:** Multiple issues\n- Phone validation now accepts international formats\n- Service/Subservice creation endpoints updated\n- BaseRate moved to Subservice level (completed Dec 5)\n- Payment calculations fixed\n- Technician earnings endpoint role-based naming\n\n## ðŸ“‹ Previous Updates:\n\n**December 4, 2025:**\n- Service hierarchy restructure (Category â†’ Service â†’ Subservice)\n- Technician profile endpoints\n- Internal employee registration system\n\n## ðŸ“Š Collection Stats:\n- Total Sections: 17 (+2)\n- Total Endpoints: 130 (+18)\n- New Endpoints Today: 18\n- Updated Endpoints: 3\n\n## âœ… All Systems Operational:\n- Payout management ready\n- Technician management ready\n- Service hierarchy correct\n- Profile endpoints working\n- Employee registration tested\n- OTP delivery confirmed\n- Server running on port 4000\n\n**Status:** Production Ready | **Date:** December 9, 2025",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication & OTP",
			"item": [
				{
					"name": "Send OTP (Step 1 for Registration)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"+8801718981009\",\n  \"name\": \"John Freelancer\",\n  \"type\": \"REGISTRATION\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/otp/send",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"otp",
								"send"
							]
						},
						"description": "**STEP 1 OF 3: Enter Name & Phone Number**\n\nSend OTP for phone verification. Used for registration, login, password reset, and verification.\n\n**UPDATED:** Dec 4, 2025 - Now accepts `name` parameter for REGISTRATION type\n\n**3-Step Freelancer Registration Flow:**\nThis is Step 1 where user enters their full name and phone number.\n\n**Request Body:**\n- phone (required): Phone number (10-15 digits)\n- name (required for REGISTRATION): Full name of the freelancer\n- type (required): REGISTRATION, LOGIN, PASSWORD_RESET, or VERIFICATION\n\n**Phone Format (Bangladesh):**\n- +8801718981009 (recommended - with country code)\n- 8801718981009 (works - auto-formatted)\n- 01718981009 (works - auto-converted to 8801718981009)\n\n**Success Response:**\n- code: OTP code (for testing/development)\n- tempToken: Temporary token (valid 10 minutes)\n- expiresAt: OTP expiry time (5 minutes)\n- smsStatus: sent/failed\n\n**What Happens:**\n1. OTP code generated (6 digits, valid 5 minutes)\n2. SMS sent to phone number\n3. Temporary token created (valid 10 minutes)\n4. User's name stored temporarily for Step 3\n5. Proceed to Step 2: Verify OTP\n\nTESTED & WORKING (Dec 4, 2025)"
					}
				},
				{
					"name": "Verify OTP (Step 2 for Registration)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"+8801718981009\",\n  \"code\": \"123456\",\n  \"type\": \"REGISTRATION\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/otp/verify",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"otp",
								"verify"
							]
						},
						"description": "**STEP 2 OF 3: Verify Phone Number**\n\nVerify the 6-digit OTP code sent to the phone number.\n\n**UPDATED:** Dec 4, 2025 - Part of 3-step freelancer registration flow\n\n**Request Body:**\n- phone (required): Same phone number from Step 1\n- code (required): 6-digit OTP code\n- type (required): Must match Step 1 (REGISTRATION)\n\n**Requirements:**\n- Use the SAME phone format as Send OTP\n- 6-digit code must match exactly\n- Must be verified within 5 minutes\n- Type must match the Send OTP request\n\n**Success Response:**\n- verified: true\n- tempToken: Temporary token for Step 3 (valid 10 minutes)\n- phone: Verified phone number\n\n**What Happens:**\n1. OTP code is validated\n2. OTP is marked as used (one-time use)\n3. Temporary token returned for Step 3\n4. Phone number is verified\n\n**Next Step:** Proceed to Step 3: Set Password using the returned tempToken\n\nTESTED & WORKING (Dec 4, 2025)"
					}
				},
				{
					"name": "Set Password (Step 3 - Complete Registration)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"+8801718981009\",\n  \"password\": \"test123\",\n  \"tempToken\": \"temp_1733305200000_abc123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/set-password",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"set-password"
							]
						},
						"description": "**STEP 3 OF 3: Set Password & Create Account**\n\n**NEW:** Dec 4, 2025 - Complete freelancer registration flow\n\nCreate a secure password to complete registration. This endpoint creates the account and logs the user in automatically.\n\n**Request Body:**\n- phone (required): Same phone from Steps 1 & 2\n- password (required): Password (minimum 6 characters)\n- tempToken (required): Temp token from Step 2\n\n**Success Response (201 Created):**\n{\n  token: JWT token (valid 7 days),\n  user: { id, name, phone, email, role: TECH_FREELANCER },\n  message: \"Account created successfully! Welcome to FSM.\"\n}\n\n**What Happens:**\n1. Password validated (min 6 characters)\n2. Temp token verified\n3. Name from Step 1 retrieved\n4. User account created (TECH_FREELANCER)\n5. Technician profile created (40% commission)\n6. Wallet initialized (balance: 0)\n7. JWT token generated\n8. User automatically logged in\n\n**Error Responses:**\n- Invalid or expired temporary token (400)\n- Password must be at least 6 characters long (400)\n- Phone already registered (400)\n\n**After Registration:**\nUser is logged in and can access protected endpoints with the JWT token.\n\nTESTED & WORKING (Dec 4, 2025)\n\n**Complete Flow:**\n1. POST /api/otp/send (name + phone)\n2. POST /api/otp/verify (OTP code)\n3. POST /api/auth/set-password (password + tempToken)\n4. User registered and logged in!"
					}
				},
				{
					"name": "Register User (Legacy)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"+8801718981009\",\n  \"password\": \"password123\",\n  \"name\": \"John Doe\",\n  \"role\": \"CUSTOMER\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						},
						"description": "**LEGACY ENDPOINT** - Direct registration (not recommended for freelancers)\n\nRegister new user directly without OTP verification. For freelancers, use the 3-step flow instead:\n1. Send OTP (Step 1)\n2. Verify OTP (Step 2)\n3. Set Password (Step 3)\n\nRoles: CUSTOMER, TECH_FREELANCER, TECH_INTERNAL, DISPATCHER, CALL_CENTER, ADMIN\n\n**Note:** This endpoint bypasses OTP verification and should only be used for admin/internal user creation."
					}
				},
				{
					"name": "Login - Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"adminToken\", jsonData.token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"1111111111\",\n  \"password\": \"admin123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					}
				},
				{
					"name": "Login - Dispatcher",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"dispatcherToken\", jsonData.token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"2222222222\",\n  \"password\": \"dispatcher123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					}
				},
				{
					"name": "Login - Technician (Freelancer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"techToken\", jsonData.token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"5555555555\",\n  \"password\": \"freelancer123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					}
				},
				{
					"name": "Login - Customer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"customerToken\", jsonData.token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"9999999999\",\n  \"password\": \"customer123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					}
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/auth/logout",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"logout"
							]
						},
						"description": "Logout current user and invalidate token"
					}
				},
				{
					"name": "Change Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"oldPassword\": \"customer123\",\n  \"newPassword\": \"newPassword456\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/change-password",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"change-password"
							]
						},
						"description": "Change user password (requires old password)"
					}
				},
				{
					"name": "Get My Profile",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Profile has required fields\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('name');",
									"    pm.expect(jsonData).to.have.property('phone');",
									"    pm.expect(jsonData).to.have.property('role');",
									"});",
									"",
									"pm.test(\"Customer profile has statistics\", function () {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.role === 'CUSTOMER') {",
									"        pm.expect(jsonData).to.have.property('totalBookings');",
									"        pm.expect(jsonData).to.have.property('totalSpent');",
									"        pm.expect(jsonData).to.have.property('businessHours');",
									"        pm.expect(jsonData.totalBookings).to.be.a('number');",
									"        pm.expect(jsonData.totalSpent).to.be.a('number');",
									"        pm.expect(jsonData.businessHours).to.be.an('object');",
									"        pm.expect(jsonData.businessHours).to.have.property('open');",
									"        pm.expect(jsonData.businessHours).to.have.property('close');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/auth/profile",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"profile"
							]
						},
						"description": "âœ… ENHANCED (Dec 3, 2025) - Get profile with ALL technician enhancements\n\n**Response Structure:**\n\n**For All Users:**\n```json\n{\n  \"id\": 5,\n  \"name\": \"Mike Freelancer\",\n  \"phone\": \"5555555555\",\n  \"email\": \"tech.freelancer@fsm.com\",\n  \"role\": \"TECH_FREELANCER\",\n  \"isBlocked\": false,\n  \"homeAddress\": \"789 Freelancer Ave, Nairobi\",\n  \"createdAt\": \"2025-11-30T06:37:39.913Z\"\n}\n```\n\n**For Technicians (Complete Profile with Dec 3 Updates):**\n```json\n{\n  \"technicianProfile\": {\n    \"id\": 2,\n    \"type\": \"FREELANCER\",\n    \"commissionRate\": 0.4,\n    \"bonusRate\": 0.05,\n    \"status\": \"ACTIVE\",\n    \n    \"department\": \"Field Services\",\n    \"joinDate\": \"2023-01-15T00:00:00.000Z\",\n    \"position\": \"Senior Technician\",\n    \n    \"skills\": [\"Electrical\", \"Plumbing\", \"HVAC\"],\n    \n    \"certifications\": [\n      {\n        \"name\": \"Electrical Engineering Diploma\",\n        \"url\": \"/uploads/cert-1.pdf\",\n        \"verifiedAt\": \"2025-12-03T09:24:10.212Z\"\n      },\n      {\n        \"name\": \"Plumbing License\",\n        \"url\": \"/uploads/cert-2.pdf\",\n        \"verifiedAt\": \"2025-12-03T09:24:10.212Z\"\n      }\n    ],\n    \n    \"responseTime\": {\n      \"minutes\": 25,\n      \"formatted\": \"25 min\",\n      \"status\": \"excellent\"\n    },\n    \n    \"bonus\": {\n      \"thisWeek\": 5400,\n      \"rate\": 0.4,\n      \"ratePercentage\": 40,\n      \"type\": \"Commission\"\n    },\n    \n    \"priorityStatus\": {\n      \"counts\": {\"high\": 6, \"medium\": 6, \"low\": 0},\n      \"percentages\": {\"high\": 50, \"medium\": 50, \"low\": 0},\n      \"mostCommon\": \"HIGH\"\n    },\n    \n    \"bankName\": \"Dutch Bangla Bank\",\n    \"bankAccountNumber\": \"1234567890\",\n    \"bankAccountHolder\": \"Mike Freelancer\",\n    \"mobileBankingType\": \"BKASH\",\n    \"mobileBankingNumber\": \"01712345678\"\n  }\n}\n```\n\n**NEW FIELDS ADDED (Dec 3, 2025):**\n\n**14.1 Employment Details:**\n- `department`: Department name (e.g., \"Field Services\")\n- `joinDate`: ISO date of employment start\n- `position`: Job title (e.g., \"Senior Technician\")\n\n**14.2 Skills & Specializations:**\n- `skills`: Auto-parsed array from specialization field\n- Display: Blue skill badges in UI\n\n**14.3 My Certifications:**\n- `certifications`: Auto-parsed array from degreesUrl\n- Each has: name, url, verifiedAt timestamp\n- Display: \"X verified\" count in UI\n\n**15.1 Response Time:**\n- `responseTime.minutes`: Average response in minutes\n- `responseTime.formatted`: Human-readable (e.g., \"25 min\" or \"1h 30m\")\n- `responseTime.status`: excellent/good/average rating\n- Calculated from last 20 jobs (acceptedAt - createdAt)\n\n**15.2 Bonus Information:**\n- `bonus.thisWeek`: Total earned this week\n- `bonus.rate`: Decimal rate (0.4 = 40%)\n- `bonus.ratePercentage`: UI display (40)\n- `bonus.type`: \"Commission\" (freelancer) or \"Bonus\" (internal)\n\n**15.3 Priority Status:**\n- `priorityStatus.counts`: Job counts by priority (HIGH/MEDIUM/LOW)\n- `priorityStatus.percentages`: Percentage distribution\n- `priorityStatus.mostCommon`: Most frequent priority level\n\n**UI Mapping:**\n\n**8.1 Availability Status:**\n- Field: `technicianProfile.status`\n- Values: ACTIVE, INACTIVE, ON_BREAK\n- Display: Green indicator \"Accept new jobs\"\n\n**Status:** âœ… PRODUCTION READY (Updated Dec 3, 2025)"
					}
				},
				{
					"name": "Update My Profile",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Name\",\n  \"status\": \"ACTIVE\",\n  \"skills\": [\"HVAC\", \"Electrical\", \"Plumbing\", \"Maintenance\"],\n  \"certifications\": [{\"name\": \"BSc Mechanical Engineering\", \"url\": \"cert1.pdf\"}],\n  \"bankName\": \"Dutch Bangla Bank\",\n  \"bankAccountNumber\": \"1234567890123456\",\n  \"bankAccountHolder\": \"Mike Freelancer\",\n  \"mobileBankingType\": \"BKASH\",\n  \"mobileBankingNumber\": \"01712345678\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/profile",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"profile"
							]
						},
						"description": "âœ… ENHANCED - Update profile with technician-specific fields\n\n**Request Body:**\n\n**For All Users:**\n```json\n{\n  \"name\": \"Updated Name\",\n  \"email\": \"updated@email.com\",\n  \"homeAddress\": \"New Address\",\n  \"latitude\": 23.8103,\n  \"longitude\": 90.4125\n}\n```\n\n**For Technicians (Additional Fields):**\n```json\n{\n  \"status\": \"ACTIVE\",\n  \"skills\": [\"HVAC\", \"Electrical\", \"Plumbing\", \"Maintenance\"],\n  \"academicTitle\": \"BSc Mechanical Engineering\",\n  \"photoUrl\": \"https://example.com/photo.jpg\",\n  \"certifications\": [\n    {\"name\": \"BSc ME\", \"url\": \"cert1.pdf\"},\n    {\"name\": \"HVAC Certified\", \"url\": \"cert2.pdf\"}\n  ],\n  \"bankName\": \"Dutch Bangla Bank\",\n  \"bankAccountNumber\": \"1234567890123456\",\n  \"bankAccountHolder\": \"Mike Freelancer\",\n  \"mobileBankingType\": \"BKASH\",\n  \"mobileBankingNumber\": \"01712345678\"\n}\n```\n\n**Technician-Specific Fields:**\n\n**8.1 Availability Status:**\n- `status`: ACTIVE | INACTIVE | ON_BREAK\n- Controls if technician can receive new assignments\n- UI: Toggle \"Accept new jobs\"\n\n**8.2 Skills & Specializations:**\n- `skills`: Array of skill names\n- Stored as JSON in `specialization` field\n- UI: Blue skill badges\n- Examples: [\"HVAC\", \"Electrical\", \"Plumbing\", \"Maintenance\"]\n\n**8.3 My Certifications:**\n- `certifications`: Array of {name, url}\n- Stored as JSON in `degreesUrl` field\n- UI: Shows count \"5 verified\"\n- Each certificate has name and URL to file\n\n**8.4 Payment Settings:**\n- `bankName`: Bank name\n- `bankAccountNumber`: Full account number\n- `bankAccountHolder`: Account holder name\n- `mobileBankingType`: BKASH | NAGAD | ROCKET\n- `mobileBankingNumber`: Mobile banking number\n\n**How It Works:**\n1. Frontend sends array: `skills: [\"HVAC\", \"Electrical\"]`\n2. Backend converts to JSON string and stores in `specialization`\n3. On GET, backend parses back to array\n4. Same for certifications â†’ `degreesUrl`\n\n**Status:** âœ… PRODUCTION READY"
					}
				},
				{
					"name": "Update Customer Profile (Call Center)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{callCenterToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Customer Name\",\n  \"homeAddress\": \"Updated Address\",\n  \"latitude\": -1.286389,\n  \"longitude\": 36.817223\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/customer/{{newCustomerId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"customer",
								"{{newCustomerId}}"
							]
						},
						"description": "Call center can update any customer's profile"
					}
				}
			]
		},
		{
			"name": "Employee Registration (Internal Team)",
			"item": [
				{
					"name": "Step 1: Initiate Registration",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"John Internal\",\n  \"employeeId\": \"EMP-2025-001\",\n  \"phone\": \"+8801718981000\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/employee/register/initiate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"employee",
								"register",
								"initiate"
							]
						},
						"description": "âœ… NEW (Dec 4, 2025) - Internal Team Portal Registration\n\n**STEP 1 OF 3: Enter Employee Details**\n\nInitiate employee registration for internal technicians (TECH_INTERNAL role).\n\n**UI: Internal Team Portal - Step 1**\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCreate Employee Account\n\n[â—] Step 1  [ ] Step 2  [ ] Step 3\n\nFull Name *\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ John Internal           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nEmployee ID *\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ EMP-2025-001            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nPhone Number *\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ +880 171 898 1000       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n         [Continue]\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n**Request Body:**\n- `name` (required): Full name of employee\n- `employeeId` (required): Unique employee ID\n- `phone` (required): Phone number for OTP verification\n\n**Success Response (200 OK):**\n```json\n{\n  \"success\": true,\n  \"message\": \"OTP sent to +8801718981000\",\n  \"code\": \"123456\",\n  \"tempToken\": \"temp_1733305200000_abc123\",\n  \"expiresAt\": \"2025-12-04T10:05:00Z\"\n}\n```\n\n**What Happens:**\n1. Validates employee details\n2. Checks if phone already registered\n3. Stores employeeId in OTP metadata\n4. Sends 6-digit OTP via SMS\n5. Returns temp token for Step 2\n\n**Error Responses:**\n- Phone already registered (400)\n- Missing required fields (400)\n- SMS delivery failed (500)\n\n**Next Step:** Proceed to Step 2: Verify OTP\n\n**Difference from Freelancer Registration:**\n- Requires employeeId (freelancers don't)\n- Creates TECH_INTERNAL role (vs TECH_FREELANCER)\n- 5% bonus rate (vs 40% commission)\n- Fixed salary + bonus model\n\n**Status:** âœ… NEW (Dec 4, 2025)"
					}
				},
				{
					"name": "Step 2: Verify OTP",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"+8801718981000\",\n  \"code\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/employee/register/verify-otp",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"employee",
								"register",
								"verify-otp"
							]
						},
						"description": "âœ… NEW (Dec 4, 2025) - Verify OTP for Employee Registration\n\n**STEP 2 OF 3: Verify Phone Number**\n\nVerify the 6-digit OTP code sent to employee's phone.\n\n**UI: Internal Team Portal - Step 2**\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nVerify Phone Number\n\n[ ] Step 1  [â—] Step 2  [ ] Step 3\n\nEnter the 6-digit code sent to:\n+880 171 898 1000\n\nâ”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”\nâ”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚\nâ””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜\n\nDidn't receive code?\n    [Resend OTP]\n\n      [Verify & Continue]\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n**Request Body:**\n- `phone` (required): Same phone from Step 1\n- `code` (required): 6-digit OTP code\n\n**Success Response (200 OK):**\n```json\n{\n  \"success\": true,\n  \"verified\": true,\n  \"message\": \"Phone verified successfully\",\n  \"tempToken\": \"temp_1733305200000_abc123\",\n  \"phone\": \"1718981000\"\n}\n```\n\n**What Happens:**\n1. Validates OTP code\n2. Marks OTP as used (one-time use)\n3. Returns temp token for Step 3\n4. OTP expires after 5 minutes\n5. Employee data preserved for Step 3\n\n**Error Responses:**\n- Invalid or expired OTP (400)\n- OTP already used (400)\n- Phone not found (404)\n\n**Next Step:** Proceed to Step 3: Set Password\n\n**Status:** âœ… NEW (Dec 4, 2025)"
					}
				},
				{
					"name": "Step 3: Complete Registration",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.token) {",
									"    pm.environment.set(\"employeeToken\", jsonData.token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"+8801718981000\",\n  \"password\": \"employee123\",\n  \"tempToken\": \"temp_1733305200000_abc123\",\n  \"name\": \"John Internal\",\n  \"employeeId\": \"EMP-2025-001\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/employee/register/complete",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"employee",
								"register",
								"complete"
							]
						},
						"description": "âœ… NEW (Dec 4, 2025) - Complete Employee Registration\n\n**STEP 3 OF 3: Set Password & Create Account**\n\nCreate password and complete internal employee registration.\n\n**UI: Internal Team Portal - Step 3**\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCreate Password\n\n[ ] Step 1  [ ] Step 2  [â—] Step 3\n\nEmployee: John Internal\nEmployee ID: EMP-2025-001\nPhone: +880 171 898 1000\n\nCreate Password *\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢              â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nMinimum 6 characters\n\nConfirm Password *\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢              â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n  [Create Account & Login]\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n**Request Body:**\n- `phone` (required): Same phone from Steps 1 & 2\n- `password` (required): Password (min 6 chars)\n- `tempToken` (required): Token from Step 2\n- `name` (required): Employee full name\n- `employeeId` (required): Employee ID\n\n**Success Response (201 Created):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Employee account created successfully\",\n  \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"user\": {\n    \"id\": 17,\n    \"name\": \"John Internal\",\n    \"phone\": \"1718981000\",\n    \"role\": \"TECH_INTERNAL\",\n    \"technicianProfile\": {\n      \"id\": 4,\n      \"type\": \"INTERNAL\",\n      \"bonusRate\": 0.05,\n      \"status\": \"ACTIVE\"\n    }\n  }\n}\n```\n\n**What Happens:**\n1. Validates temp token\n2. Creates user account (TECH_INTERNAL)\n3. Creates technician profile:\n   - Type: INTERNAL\n   - Bonus Rate: 5%\n   - Status: ACTIVE\n4. Stores employeeId in profile\n5. Initializes wallet (balance: 0)\n6. Generates JWT token (valid 7 days)\n7. Auto-login (returns token)\n\n**Account Created:**\n- Role: TECH_INTERNAL\n- Type: Internal Employee\n- Bonus Rate: 5% (vs 40% for freelancers)\n- Payment Model: Fixed salary + bonus\n- Access: Same as freelancers + internal features\n\n**Error Responses:**\n- Invalid or expired temp token (400)\n- Password too short (400)\n- Phone already registered (400)\n- Missing employeeId (400)\n\n**After Registration:**\nEmployee is logged in and can access:\n- Technician dashboard\n- Job assignments\n- Earnings tracking\n- Internal team features\n\n**Comparison with Freelancer:**\n\n| Feature | Freelancer | Internal Employee |\n|---------|-----------|-------------------|\n| Role | TECH_FREELANCER | TECH_INTERNAL |\n| Rate | 40% commission | 5% bonus |\n| EmployeeId | Not required | Required |\n| Payment | Per job | Salary + bonus |\n| Registration | 3 steps | 3 steps (portal) |\n\n**Status:** âœ… NEW (Dec 4, 2025)"
					}
				},
				{
					"name": "Resend OTP",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"+8801718981000\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/employee/register/resend-otp",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"employee",
								"register",
								"resend-otp"
							]
						},
						"description": "âœ… NEW (Dec 4, 2025) - Resend OTP for Employee Registration\n\n**Resend OTP if employee didn't receive it or it expired.**\n\n**UI: Triggered from Step 2**\n```\nDidn't receive code?\n    [Resend OTP]\n```\n\n**Request Body:**\n- `phone` (required): Same phone from Step 1\n\n**Success Response (200 OK):**\n```json\n{\n  \"success\": true,\n  \"message\": \"OTP resent to +8801718981000\",\n  \"code\": \"654321\",\n  \"tempToken\": \"temp_1733305260000_xyz789\",\n  \"expiresAt\": \"2025-12-04T10:10:00Z\"\n}\n```\n\n**What Happens:**\n1. Retrieves previous OTP data\n2. Marks old OTP as expired\n3. Generates new 6-digit OTP\n4. Sends new SMS\n5. Preserves employeeId from Step 1\n6. Returns new temp token\n\n**Features:**\n- Preserves employee data (name, employeeId)\n- New OTP code generated\n- New temp token issued\n- Old OTP invalidated\n- Employee can continue from Step 2\n\n**Error Responses:**\n- No pending registration found (404)\n- SMS delivery failed (500)\n\n**Status:** âœ… NEW (Dec 4, 2025)"
					}
				}
			]
		},
		{
			"name": "Service Requests",
			"item": [
				{
					"name": "Search Customer by Phone",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{callCenterToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/sr/search-customer?phone=9999999999",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"sr",
								"search-customer"
							],
							"query": [
								{
									"key": "phone",
									"value": "9999999999"
								}
							]
						},
						"description": "Call center searches for existing customer by phone number before creating SR"
					}
				},
				{
					"name": "Create SR (Guest) with GPS",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"srId\", jsonData.serviceRequest.id);",
									"    pm.environment.set(\"srNumber\", jsonData.serviceRequest.srNumber);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Jane Customer\",\n  \"phone\": \"8888888888\",\n  \"address\": \"456 Oak Street, Downtown\",\n  \"latitude\": -1.292066,\n  \"longitude\": 36.821946,\n  \"categoryId\": 1,\n  \"subserviceId\": 1,\n  \"serviceId\": 1,\n  \"description\": \"AC not cooling properly\",\n  \"paymentType\": \"MOBILE_MONEY\",\n  \"priority\": \"HIGH\",\n  \"preferredDate\": \"2025-12-10T10:00:00Z\",\n  \"preferredTime\": \"Morning\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/sr",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"sr"
							]
						},
						"description": "Guest/Web Portal SR creation. **REQUIRED**: name, phone, address, categoryId, subserviceId. **OPTIONAL**: preferredDate (ISO 8601 format), preferredTime (e.g., 'Morning', 'Afternoon', 'Evening'). Response includes srId, status, customerName, and appointment details."
					}
				},
				{
					"name": "Create SR (Authenticated Customer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"srId\", jsonData.serviceRequest.id);",
									"    pm.environment.set(\"srNumber\", jsonData.serviceRequest.srNumber);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"address\": \"789 Service Street, Nairobi\",\n  \"latitude\": -1.286389,\n  \"longitude\": 36.817223,\n  \"categoryId\": 1,\n  \"subserviceId\": 1,\n  \"serviceId\": 1,\n  \"description\": \"Refrigerator not cooling\",\n  \"paymentType\": \"CASH\",\n  \"priority\": \"MEDIUM\",\n  \"preferredDate\": \"2025-12-15T14:00:00Z\",\n  \"preferredTime\": \"Afternoon\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/sr",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"sr"
							]
						},
						"description": "Authenticated customer creates SR. **REQUIRED**: phone, address, categoryId, subserviceId (name from auth token). **OPTIONAL**: preferredDate (ISO 8601 format), preferredTime (e.g., 'Morning', 'Afternoon', 'Evening'). GPS coordinates auto-saved to customer profile."
					}
				},
				{
					"name": "List SRs",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/sr?status=NEW",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"sr"
							],
							"query": [
								{
									"key": "status",
									"value": "NEW"
								}
							]
						},
						"description": "List service requests with optional filters. Customers see only their own, others see all."
					}
				},
				{
					"name": "Get My SRs (Customer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has serviceRequests array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('serviceRequests');",
									"    pm.expect(jsonData.serviceRequests).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Each SR has required fields including readableStatus\", function () {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.serviceRequests.length > 0) {",
									"        var sr = jsonData.serviceRequests[0];",
									"        pm.expect(sr).to.have.property('id');",
									"        pm.expect(sr).to.have.property('srNumber');",
									"        pm.expect(sr).to.have.property('status');",
									"        pm.expect(sr).to.have.property('readableStatus');",
									"        pm.expect(sr.readableStatus).to.be.a('string');",
									"        pm.expect(sr.readableStatus.length).to.be.above(0);",
									"    }",
									"});",
									"",
									"pm.test(\"All SRs belong to authenticated customer\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.serviceRequests.forEach(function(sr) {",
									"        pm.expect(sr).to.have.property('customerId');",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/srs/my?status=ACTIVE",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"srs",
								"my"
							],
							"query": [
								{
									"key": "status",
									"value": "ACTIVE",
									"description": "Optional: PENDING_APPROVAL, ACTIVE, COMPLETED, CANCELLED, REJECTED"
								}
							]
						},
						"description": "Get only authenticated customer's service requests with readable status. Supports status filtering."
					}
				},
				{
					"name": "Get SR by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/sr/{{srId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"sr",
								"{{srId}}"
							]
						},
						"description": "Get service request details by ID or SR number"
					}
				},
				{
					"name": "Cancel SR",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Changed my mind\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/sr/{{srId}}/cancel",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"sr",
								"{{srId}}",
								"cancel"
							]
						},
						"description": "Cancel a service request. Customers can cancel their own, staff can cancel any."
					}
				},
				{
					"name": "Rebook Service",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"New SR created with readableStatus\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('sr');",
									"    pm.expect(jsonData.sr).to.have.property('id');",
									"    pm.expect(jsonData.sr).to.have.property('srNumber');",
									"    pm.expect(jsonData.sr).to.have.property('status');",
									"    pm.expect(jsonData.sr).to.have.property('readableStatus');",
									"    pm.expect(jsonData.sr.readableStatus).to.equal('Pending Approval');",
									"});",
									"",
									"pm.test(\"Customization applied\", function () {",
									"    var jsonData = pm.response.json();",
									"    var requestBody = JSON.parse(pm.request.body.raw);",
									"    if (requestBody.preferredDate) {",
									"        pm.expect(jsonData.sr.preferredDate).to.exist;",
									"    }",
									"    if (requestBody.description) {",
									"        pm.expect(jsonData.sr.description).to.equal(requestBody.description);",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"preferredDate\": \"2025-12-05\",\n  \"preferredTime\": \"10:00 AM\",\n  \"description\": \"Rescheduled maintenance\",\n  \"address\": \"Updated location address\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/sr/{{srId}}/rebook",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"sr",
								"{{srId}}",
								"rebook"
							]
						},
						"description": "Rebook a service with customization (new date/time/description/address). Creates new SR based on original."
					}
				},
				{
					"name": "Book Again",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Exact duplicate SR created\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('sr');",
									"    pm.expect(jsonData.sr).to.have.property('id');",
									"    pm.expect(jsonData.sr).to.have.property('srNumber');",
									"    pm.expect(jsonData.sr).to.have.property('status');",
									"    pm.expect(jsonData.sr).to.have.property('readableStatus');",
									"    pm.expect(jsonData.sr.status).to.equal('PENDING_APPROVAL');",
									"    pm.expect(jsonData.sr.readableStatus).to.equal('Pending Approval');",
									"});",
									"",
									"pm.test(\"All service details copied\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.sr).to.have.property('categoryId');",
									"    pm.expect(jsonData.sr).to.have.property('subserviceId');",
									"    pm.expect(jsonData.sr).to.have.property('serviceId');",
									"    pm.expect(jsonData.sr).to.have.property('address');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/sr/{{srId}}/book-again",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"sr",
								"{{srId}}",
								"book-again"
							]
						},
						"description": "Book the same service again with no customization. Creates exact duplicate of original SR."
					}
				}
			]
		},
		{
			"name": "Work Orders",
			"item": [
				{
					"name": "Convert SR to WO",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"woId\", jsonData.woNumber || jsonData.id);",
									"    pm.environment.set(\"woNumber\", jsonData.woNumber);",
									"    console.log('WO Created - ID:', jsonData.id, 'woNumber:', jsonData.woNumber);",
									"} else {",
									"    console.error('Failed to create WO:', pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"technicianId\": 4,\n  \"scheduledAt\": \"2025-11-24T09:00:00Z\",\n  \"estimatedDuration\": 120,\n  \"notes\": \"Customer prefers morning. Estimated 2 hours.\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/wos/from-sr/{{srId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"from-sr",
								"{{srId}}"
							]
						},
						"description": "Convert SR to WO with estimatedDuration (minutes). GPS coordinates automatically copied from SR."
					}
				},
				{
					"name": "Get All Work Orders",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/wos?status=ASSIGNED",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos"
							],
							"query": [
								{
									"key": "status",
									"value": "ASSIGNED",
									"description": "Filter by work order status"
								},
								{
									"key": "technicianId",
									"value": "",
									"disabled": true,
									"description": "Filter by technician ID (for my tasks)"
								},
								{
									"key": "page",
									"value": "1",
									"disabled": true,
									"description": "Page number"
								},
								{
									"key": "limit",
									"value": "10",
									"disabled": true,
									"description": "Results per page"
								}
							]
						},
						"description": "Get all work orders with filtering options.\n\n**2.1 WHERE I GET START, ACTIVE, THIS MONTH (Dashboard Stats):**\n\nâ€¢ **Ready to Start (2)**: `GET /api/wos?technicianId={yourId}&status=ASSIGNED`\n  - Jobs assigned to you, waiting for acceptance\n  - Shows in \"Ready to Start\" section with count\n\nâ€¢ **Active Now (1)**: `GET /api/wos?technicianId={yourId}&status=ACCEPTED` or `status=IN_PROGRESS`\n  - Jobs you accepted or currently working on\n  - Shows in \"Active\" tab with count\n\nâ€¢ **This Month (28)**: `GET /api/wos?technicianId={yourId}&status=COMPLETED`\n  - Jobs you finished this month\n  - Shows in \"Completed\" tab with count\n  - Also from: `/api/commissions/dashboard` â†’ totalJobsCompleted\n\n**2.2 TASKS ASSIGNED TO FREELANCER TECHNICIAN:**\n\nEach task card displays:\nâ€¢ Customer: Name + Phone (Michael Johnson +1 234 567 8900)\nâ€¢ Location: Address with GPS (123 Main St, Apt 4B)\nâ€¢ Scheduled: Date and time (Today at 2:00 PM)\nâ€¢ Commission: Your earnings ($18.00 from $120 job = 15%)\nâ€¢ Payment note: \"Payment follows completion verification\"\nâ€¢ Action buttons: Complete Job, Close\n\n**API Response Structure:**\n```json\n{\n  \"workOrders\": [\n    {\n      \"id\": 4,\n      \"woNumber\": \"WO-1234567890\",\n      \"status\": \"IN_PROGRESS\",\n      \"customer\": {\n        \"name\": \"Michael Johnson\",\n        \"phone\": \"+1 234 567 8900\"\n      },\n      \"address\": \"123 Main St, Apt 4B\",\n      \"latitude\": 23.8103,\n      \"longitude\": 90.4125,\n      \"scheduledAt\": \"2025-12-03T14:00:00Z\",\n      \"commissions\": [\n        {\n          \"type\": \"COMMISSION\",\n          \"amount\": 18.00,\n          \"status\": \"PENDING\"\n        }\n      ],\n      \"payments\": [\n        {\n          \"amount\": 120,\n          \"status\": \"PENDING_VERIFICATION\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Query Parameters:**\nâ€¢ status: Filter by status (UNASSIGNED, ASSIGNED, ACCEPTED, IN_PROGRESS, COMPLETED, CANCELLED)\nâ€¢ technicianId: Filter by technician ID (for freelancer to see their own tasks)\nâ€¢ customerId: Filter by customer ID\nâ€¢ priority: Filter by priority (LOW, MEDIUM, HIGH, URGENT)\nâ€¢ page: Page number (default: 1)\nâ€¢ limit: Results per page (default: 10)\n\n**For Freelancer Technician Dashboard:**\n\n1. **Active Tasks (Ready to Start + In Progress):**\n   - Ready to Start: `GET /api/wos?technicianId={id}&status=ASSIGNED`\n   - Active Now: `GET /api/wos?technicianId={id}&status=ACCEPTED`\n   - In Progress: `GET /api/wos?technicianId={id}&status=IN_PROGRESS`\n\n2. **Completed Tasks This Month:**\n   - `GET /api/wos?technicianId={id}&status=COMPLETED`\n\n3. **Task Counts:**\n   â€¢ Ready to Start: Count results with status=ASSIGNED\n   â€¢ Active Now: Count results with status=ACCEPTED or IN_PROGRESS\n   â€¢ This Month: Count results with status=COMPLETED (filter by date range)\n\nResponse includes full work order details with customer, technician, category info, payment and commission data, service request reference, and GPS coordinates for location."
					}
				},
				{
					"name": "Get WO by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/wos/{{woId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"{{woId}}"
							]
						}
					}
				},
				{
					"name": "Assign Technician to WO",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"technicianId\": 6\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/wos/{{woId}}/assign",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"{{woId}}",
								"assign"
							]
						}
					}
				},
				{
					"name": "Accept WO (Technician)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"action\": \"ACCEPT\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/wos/{{woId}}/respond",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"{{woId}}",
								"respond"
							]
						},
						"description": "Technician accepts assigned work order (Ready to Start). Action: ACCEPT. This moves the work order from ASSIGNED to ACCEPTED status, indicating the technician has confirmed they will complete the job. Next Steps: 1) Review job details 2) Travel to customer location 3) Click Start Job button with GPS check-in. UI Button: View Details then Accept Job"
					}
				},
				{
					"name": "Decline WO (Technician)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"action\": \"DECLINE\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/wos/{{woId}}/respond",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"{{woId}}",
								"respond"
							]
						},
						"description": "Technician declines assigned work order. Action: DECLINE, Required: declineReason. This returns the work order to UNASSIGNED status so dispatcher can reassign to another technician. Common decline reasons: Unable to reach location, Lack required skills or tools, Schedule conflict, Emergency situation"
					}
				},
				{
					"name": "Start Job (GPS Check-in)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"lat\": 23.8103,\n  \"lng\": 90.4125\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/wos/{{woId}}/start",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"{{woId}}",
								"start"
							]
						},
						"description": "Start work order with GPS check-in verification. Required: lat (latitude), lng (longitude). This changes status from ACCEPTED to IN_PROGRESS and records start time, GPS coordinates for location verification, and technician arrival confirmation. UI Flow: 1) Technician clicks Continue or Start Job button 2) App captures GPS location 3) Verifies technician is at job site 4) Status updates to In Progress. Note: GPS verification ensures service quality and prevents fraud."
					}
				},
				{
					"name": "Complete Job",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "completionNotes",
									"value": "AC fixed, cleaned filters, refilled gas",
									"type": "text"
								},
								{
									"key": "materialsUsed",
									"value": "[{\"item\":\"Air Filter\",\"qty\":1,\"cost\":50},{\"item\":\"Refrigerant Gas\",\"qty\":2,\"cost\":200}]",
									"type": "text"
								},
								{
									"key": "photos",
									"type": "file",
									"src": []
								},
								{
									"key": "photos",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/wos/{{woId}}/complete",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"{{woId}}",
								"complete"
							]
						},
						"description": "âœ… FIXED (Dec 3, 2025) - Complete work order with optional photos\n\n**WHAT WAS FIXED:**\n- âœ… Now accepts jobs in ACCEPTED status (not just IN_PROGRESS)\n- âœ… Photos are now OPTIONAL (min 0, max 5)\n- âœ… Returns bonus calculation in response\n\n**UI Flow (Complete Job Modal):**\n\n1. **Work Photos (OPTIONAL - Changed Dec 3):**\n   - Tap to upload photos\n   - 0-5 photos allowed (10MB each)\n   - Formats: JPEG, PNG, PDF\n   - Shows before/after work evidence\n\n2. **Work Notes (Optional):**\n   - Add notes about work completed\n   - Parts used details\n   - Recommendations for customer\n   - Any issues encountered\n\n3. **Commission Calculation Display:**\n   - Job Payment: $120\n   - Commission Rate: 15%\n   - You Earn: $18.00\n   - Payment processed after job completion verification\n\n**Request Format:**\n- Content-Type: multipart/form-data\n- Authorization: Bearer {{techToken}}\n\n**Form Fields:**\nâ€¢ photos (optional): File uploads (0-5 files)\nâ€¢ completionNotes (optional): String - Work description\nâ€¢ materialsUsed (optional): JSON array - [{\"item\":\"Air Filter\",\"qty\":1,\"cost\":50}]\n\n**Status Flow (FIXED):**\n- ACCEPTED â†’ COMPLETED (âœ… Now works - Fixed Dec 3)\n- IN_PROGRESS â†’ COMPLETED (âœ… Still works)\n\n**Response Structure:**\n```json\n{\n  \"message\": \"Work order completed\",\n  \"workOrder\": {\n    \"id\": 2,\n    \"woNumber\": \"WO-1234567891\",\n    \"status\": \"COMPLETED\",\n    \"completedAt\": \"2025-12-03T14:30:00Z\"\n  },\n  \"bonusCalculation\": {\n    \"baseRate\": 900,\n    \"rate\": 0.4,\n    \"bonus\": 360,\n    \"rateDisplay\": \"40% Commission\"\n  }\n}\n```\n\n**What Happens After:**\n1. Work order status changes to COMPLETED\n2. Photos uploaded to server (if provided)\n3. Admin receives notification to verify payment\n4. After admin approves payment proof:\n   - Commission calculated (15% of job payment)\n   - Commission added to your wallet as EARNED\n   - Available for payout request\n\n**Commission Calculation Example:**\n```\nJob Payment: $120\nCommission Rate: 15% (from your profile)\nYour Earnings: $120 Ã— 0.15 = $18.00\nStatus: EARNED (available in wallet)\n```\n\n**UI Actions:**\nâ€¢ Continue button â†’ Opens complete job modal\nâ€¢ Complete Job button â†’ Submits photos and notes\nâ€¢ Cancel â†’ Returns to job details\n\n**Status:** âœ… FIXED & TESTED (Dec 3, 2025)"
					}
				},
				{
					"name": "Cancel WO",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Customer cancelled request\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/wos/{{woId}}/cancel",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"{{woId}}",
								"cancel"
							]
						},
						"description": "Cancel work order (Admin/Dispatcher only)"
					}
				},
				{
					"name": "Get Time Remaining",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/wos/{{woId}}/time-remaining",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"{{woId}}",
								"time-remaining"
							]
						},
						"description": "Get remaining time before work order expires (status auto-changes after deadline)"
					}
				},
				{
					"name": "Get Active Deadlines (Admin)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/wos/admin/active-deadlines",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"admin",
								"active-deadlines"
							]
						},
						"description": "View all active work order deadlines with time remaining"
					}
				},
				{
					"name": "Cleanup Expired WOs (Admin)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/wos/admin/cleanup-expired",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"admin",
								"cleanup-expired"
							]
						},
						"description": "Manually trigger cleanup of expired work orders (auto-runs every 5 minutes)"
					}
				},
				{
					"name": "Reassign WO",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"technicianId\": 5,\n  \"reason\": \"Previous technician unavailable\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/wos/{{woId}}/reassign",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"{{woId}}",
								"reassign"
							]
						},
						"description": "Reassign work order to a different technician (Admin/Dispatcher only).\n\nUse Cases:\nâ€¢ Original technician unavailable\nâ€¢ Better skilled technician needed\nâ€¢ Load balancing between technicians\nâ€¢ Technician declined the job\n\nRequest Body:\nâ€¢ technicianId (required): New technician ID (must be active/unblocked)\nâ€¢ reason (optional): Reason for reassignment\n\nIMPORTANT: Ensure the technician ID is active and not blocked. Use Get All Technicians endpoint to find available technicians.\n\nNote: This changes the assigned technician. For rescheduling dates/times, you need to:\n1. Cancel the current WO\n2. Create a new WO from the SR with updated schedule\n\nOr use the SR Rebook endpoint before WO creation."
					}
				},
				{
					"name": "Reschedule WO",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"scheduledDate\": \"2025-12-05\",\n  \"scheduledTime\": \"14:00\",\n  \"estimatedDuration\": 2,\n  \"notes\": \"Rescheduled at customer request\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/wos/{{woId}}/reschedule",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"wos",
								"{{woId}}",
								"reschedule"
							]
						},
						"description": "Reschedule work order to a different date and time (Admin/Dispatcher only).\n\nUse Cases:\nâ€¢ Customer requests different date/time\nâ€¢ Technician availability changed\nâ€¢ Weather or emergency delays\nâ€¢ Optimizing technician schedule\n\nRequest Body:\nâ€¢ scheduledDate (required): Date in YYYY-MM-DD format\nâ€¢ scheduledTime (required): Time in HH:MM format (24-hour)\nâ€¢ estimatedDuration (optional): Duration in hours (will be converted to minutes)\nâ€¢ notes (optional): Reason for rescheduling\n\nRestrictions:\nâ€¢ Cannot reschedule COMPLETED or CANCELLED work orders\nâ€¢ New date/time must be in the future\nâ€¢ Technician and customer will be notified"
					}
				}
			]
		},
		{
			"name": "Payments",
			"item": [
				{
					"name": "Upload Payment Proof (Technician)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"paymentId\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "woId",
									"value": "{{woId}}",
									"type": "text",
									"description": "Work Order ID"
								},
								{
									"key": "amount",
									"value": "5000",
									"type": "text",
									"description": "Payment amount received from customer"
								},
								{
									"key": "method",
									"value": "MOBILE_MONEY",
									"type": "text",
									"description": "MOBILE_MONEY or CASH"
								},
								{
									"key": "transactionRef",
									"value": "MPESA-ABC123456",
									"type": "text",
									"description": "M-Pesa/Mobile Money transaction reference"
								},
								{
									"key": "proof",
									"type": "file",
									"src": [],
									"description": "Payment screenshot (M-Pesa) or bank deposit slip (Cash)"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/payments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payments"
							]
						},
						"description": "Technician uploads payment proof after completing job:\n- Mobile Money: Screenshot of M-Pesa/mobile money transaction\n- Cash: Bank deposit slip or receipt showing cash deposited to company account"
					}
				},
				{
					"name": "Get All Payments",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/payments?status=PENDING_VERIFICATION",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payments"
							],
							"query": [
								{
									"key": "status",
									"value": "PENDING_VERIFICATION"
								}
							]
						},
						"description": "Get all payments with optional status filter (Admin/Dispatcher only)"
					}
				},
				{
					"name": "Get Payment Stats",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/payments/stats/overview",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payments",
								"stats",
								"overview"
							]
						},
						"description": "Get payment statistics overview including totals by status and method"
					}
				},
				{
					"name": "Get Payment by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/payments/{{paymentId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payments",
								"{{paymentId}}"
							]
						},
						"description": "Get payment details by ID (accessible by Admin, Dispatcher, and Technicians)"
					}
				},
				{
					"name": "Verify Payment (Approve)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"action\": \"APPROVE\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/payments/{{paymentId}}/verify",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payments",
								"{{paymentId}}",
								"verify"
							]
						},
						"description": "Approve payment proof and trigger commission calculation (Admin/Dispatcher only)"
					}
				},
				{
					"name": "Reject Payment",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"action\": \"REJECT\",\n  \"reason\": \"Unclear screenshot\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/payments/{{paymentId}}/verify",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payments",
								"{{paymentId}}",
								"verify"
							]
						},
						"description": "Reject payment proof with reason, work order returns to COMPLETED status (Admin/Dispatcher only)"
					}
				}
			]
		},
		{
			"name": "Commissions & Payouts",
			"item": [
				{
					"name": "Get My Wallet Balance",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/commissions/wallet",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"commissions",
								"wallet"
							]
						},
						"description": "Get technician/freelancer wallet balance and recent transactions.\n\nResponse includes:\nâ€¢ balance: Current available balance (always >= 0)\nâ€¢ actualBalance: Real balance (may be negative if adjustments needed)\nâ€¢ recentTransactions: Last 10 wallet transactions\nâ€¢ warning: Alert if balance requires adjustment\n\nWallet is automatically created when technician completes their first paid work order."
					}
				},
				{
					"name": "Get My Commissions",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/commissions/my-commissions?status=EARNED",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"commissions",
								"my-commissions"
							],
							"query": [
								{
									"key": "status",
									"value": "EARNED"
								}
							]
						},
						"description": "âœ… ENHANCED - Commission Transaction History\n\n**UI: Recent Transactions Section**\n\nDisplays recent commission earnings with \"View All\" link:\n```\nRecent Transactions        View All\n\nHVAC Maintenance           $95\nMichael Johnson\nToday, 2:00 PM\n\nPlumbing Repair            $75\nRobert Brown\nNov 3, 2025\n\nHVAC Installation         $200\nEmily Davis\nNov 2, 2025\n\nElectrical Repair          $55\nJames Wilson\nNov 1, 2025\n```\n\n**API Response Structure:**\n```json\n[\n  {\n    \"id\": 1,\n    \"type\": \"COMMISSION\",\n    \"amount\": 95,\n    \"status\": \"EARNED\",\n    \"technicianId\": 5,\n    \"workOrderId\": 4,\n    \"workOrder\": {\n      \"woNumber\": \"WO-1234567890\",\n      \"completedAt\": \"2025-12-03T14:00:00Z\",\n      \"customer\": {\n        \"name\": \"Michael Johnson\"\n      },\n      \"category\": {\n        \"name\": \"HVAC Maintenance\"\n      }\n    },\n    \"createdAt\": \"2025-12-03T14:00:00Z\"\n  }\n]\n```\n\n**Query Parameters:**\nâ€¢ status: Filter by EARNED, PAID, PENDING (default: all)\nâ€¢ startDate: Filter from date YYYY-MM-DD (e.g., 2025-11-01)\nâ€¢ endDate: Filter to date YYYY-MM-DD (e.g., 2025-12-03)\nâ€¢ limit: Number of results (use ?limit=4 for \"Recent\")\n\n**For Recent Transactions (Last 4):**\n`GET /api/commissions/my-commissions?status=EARNED&limit=4`\n\n**For View All Transactions:**\n`GET /api/commissions/my-commissions?status=EARNED`\n\n**Display Format:**\n1. **Job Type:** workOrder.category.name (\"HVAC Maintenance\")\n2. **Customer:** workOrder.customer.name (\"Michael Johnson\")\n3. **Date:** Format completedAt as \"Today, 2:00 PM\" or \"Nov 3, 2025\"\n4. **Amount:** Commission earned in green ($95)\n\n**Commission Calculation:**\n```\nJob Payment: $633 (from work order)\nCommission Rate: 15% (from profile)\nYour Earnings: $633 Ã— 0.15 = $95\n```\n\n**Response Fields:**\nâ€¢ amount: Commission earned per job\nâ€¢ status: EARNED (available), PAID (withdrawn), PENDING (processing)\nâ€¢ workOrder: Job details with customer, category, completion date\nâ€¢ createdAt: When commission was recorded\n\n**Status:** âœ… PRODUCTION READY"
					}
				},
				{
					"name": "Technician Dashboard",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/commissions/dashboard",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"commissions",
								"dashboard"
							]
						},
						"description": "âœ… FIXED (Dec 4, 2025) - Technician Financial Dashboard with Complete Breakdown\n\n**UI: This Month Breakdown Section**\n\nDisplays monthly performance summary:\n```\nJobs Completed\n28 jobs                    $6,450\n\nCommission\nEarnings rate              $320\n\nTotal                      $6,770\n```\n\n**API Response Structure:**\n```json\n{\n  \"walletBalance\": 6770,\n  \"totalEarned\": 320,\n  \"totalPaid\": 0,\n  \"pendingPayout\": 320,\n  \"totalAllTimeEarnings\": 320,\n  \"totalJobsCompleted\": 28,\n  \"breakdown\": {\n    \"jobsCompleted\": {\n      \"count\": 28,\n      \"totalAmount\": 6450\n    },\n    \"commission\": {\n      \"amount\": 320\n    },\n    \"total\": 6770\n  }\n}\n```\n\n**Field Mapping (UPDATED Dec 4):**\nâ€¢ **Jobs Completed:** breakdown.jobsCompleted.count (28 jobs)\nâ€¢ **Jobs Value:** breakdown.jobsCompleted.totalAmount ($6,450)\n  - Automatically calculated from verified payments\n  - Sum of all VERIFIED payments for completed work orders\n\nâ€¢ **Commission Earnings:** breakdown.commission.amount ($320)\n  - Your earnings at commission rate (typically 15-40%)\n  - Status: EARNED (available in wallet)\n\nâ€¢ **Total:** breakdown.total ($6,770)\n  - Jobs Value + Commission = $6,450 + $320 = $6,770\n  - Available for payout request\n\n**Response Fields:**\nâ€¢ walletBalance: Current available balance\nâ€¢ totalEarned: Total earned commissions (EARNED status)\nâ€¢ totalPaid: Already withdrawn amount (PAID status)\nâ€¢ pendingPayout: Same as totalEarned (available for withdrawal)\nâ€¢ totalAllTimeEarnings: Lifetime total (all statuses)\nâ€¢ totalJobsCompleted: Count of completed work orders\nâ€¢ **breakdown** (NEW): Complete breakdown with jobs, commission, and total\n\n**Usage:**\n1. Display \"28 jobs\" from breakdown.jobsCompleted.count\n2. Display \"$6,450\" from breakdown.jobsCompleted.totalAmount\n3. Display \"$320\" from breakdown.commission.amount\n4. Display \"$6,770\" from breakdown.total\n\n**What Was Fixed (Dec 4, 2025):**\nâœ… Added complete breakdown object with all values\nâœ… Backend now calculates job payment totals automatically\nâœ… No need to make separate API calls for job values\nâœ… Single endpoint provides all dashboard data\n\n**Status:** âœ… FIXED & TESTED (Dec 4, 2025)"
					}
				},
				{
					"name": "Request Payout",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"payoutRequestId\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"amount\": 100,\n  \"reason\": \"Need funds for expenses\",\n  \"paymentMethod\": \"BANK_ACCOUNT\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/commissions/payout-request",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"commissions",
								"payout-request"
							]
						},
						"description": "âœ… ENHANCED - Request early payout with payment method\n\n**UI: Request Early Payout Modal**\n\n**Amount Available:** $141.00 (wallet balance)\n- Jobs completed: 7\n- Commission rate: 15%\n\n**Payment Method Selection:**\n\n**Request Body:**\n```json\n{\n  \"amount\": 100,\n  \"reason\": \"Need funds for expenses\",\n  \"paymentMethod\": \"BANK_ACCOUNT\"\n}\n```\n\n**Fields:**\nâ€¢ amount (required): Payout amount â‰¤ wallet balance\nâ€¢ reason (optional): Reason for early payout\nâ€¢ paymentMethod (required): BANK_ACCOUNT or MOBILE_BANKING\n\n**How Backend Selects Bank Account:**\n\n1. **Technician Profile Setup** (done once):\n   - Bank Account: bankAccountNumber, bankName, bankAccountHolder\n   - Mobile Banking: mobileBankingNumber, mobileBankingType (BKASH/NAGAD/ROCKET)\n\n2. **Payout Request** (each time):\n   - Technician selects payment method in UI\n   - Backend validates method is configured\n   - Stores last 4 digits for display (\"****1234\")\n\n3. **Admin Processing:**\n   - Admin sees full account details from profile\n   - Transfers funds to selected account\n   - Updates status to APPROVED\n\n**Payment Options:**\nâ€¢ `BANK_ACCOUNT` â†’ Uses profile.bankAccountNumber\nâ€¢ `MOBILE_BANKING` â†’ Uses profile.mobileBankingNumber\n\n**Response:**\n```json\n{\n  \"id\": 1,\n  \"amount\": 100,\n  \"status\": \"PENDING\",\n  \"paymentMethod\": \"BANK_ACCOUNT\",\n  \"bankAccountLast4\": \"1234\"\n}\n```\n\n**Validation:**\n- Checks payment method is configured\n- Validates sufficient balance\n- Returns 400 if account not set up\n\n**Status:** âœ… PRODUCTION READY"
					}
				},
				{
					"name": "Get My Payout Requests",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/commissions/my-payout-requests?status=PENDING",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"commissions",
								"my-payout-requests"
							],
							"query": [
								{
									"key": "status",
									"value": "PENDING",
									"description": "PENDING | APPROVED | REJECTED"
								}
							]
						},
						"description": "âœ… NEW (Dec 4, 2025) - Get Technician's Own Payout Requests\n\n**UI: Time Off Requests Section** (Profile Screen)\n\nDisplays technician's payout requests:\n```\nTime Off Requests    â†’\n2 pending\n```\n\n**API Response:**\n```json\n[\n  {\n    \"id\": 1,\n    \"technicianId\": 5,\n    \"amount\": 100,\n    \"status\": \"PENDING\",\n    \"reason\": \"Need funds for expenses\",\n    \"paymentMethod\": \"BANK_ACCOUNT\",\n    \"bankAccountLast4\": \"1234\",\n    \"createdAt\": \"2025-12-04T10:00:00Z\",\n    \"reviewedAt\": null,\n    \"reviewedBy\": null\n  },\n  {\n    \"id\": 2,\n    \"technicianId\": 5,\n    \"amount\": 200,\n    \"status\": \"APPROVED\",\n    \"reason\": \"Emergency expenses\",\n    \"paymentMethod\": \"MOBILE_BANKING\",\n    \"bankAccountLast4\": \"5678\",\n    \"createdAt\": \"2025-12-03T14:00:00Z\",\n    \"reviewedAt\": \"2025-12-03T15:30:00Z\",\n    \"reviewedBy\": {\n      \"id\": 1,\n      \"name\": \"Admin User\"\n    }\n  }\n]\n```\n\n**Query Parameters:**\nâ€¢ status (optional): PENDING, APPROVED, REJECTED\n  - Default: all statuses\n\n**Features:**\n- Shows only technician's own requests\n- Includes payment method details\n- Shows review status and reviewer info\n- Sorted by creation date (newest first)\n\n**UI Display:**\n```\nTime Off Requests          â†’\n2 pending\n\nRequest #1\n$100 - PENDING\nRequested: Dec 4, 2025\nReason: Need funds for expenses\nPayment: Bank ****1234\n\nRequest #2\n$200 - APPROVED\nRequested: Dec 3, 2025\nReviewed by: Admin User\nPayment: Mobile ****5678\n```\n\n**Authorization:** Technician only (TECH_INTERNAL, TECH_FREELANCER)\n\n**Status:** âœ… NEW (Dec 4, 2025)"
					}
				},
				{
					"name": "Get All Payout Requests (Admin)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/commissions/payout-requests?status=PENDING",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"commissions",
								"payout-requests"
							],
							"query": [
								{
									"key": "status",
									"value": "PENDING"
								}
							]
						}
					}
				},
				{
					"name": "Approve Payout Request",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"action\": \"APPROVE\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/commissions/payout-requests/{{payoutRequestId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"commissions",
								"payout-requests",
								"{{payoutRequestId}}"
							]
						}
					}
				},
				{
					"name": "Reject Payout Request",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"action\": \"REJECT\",\n  \"reason\": \"Insufficient earned balance\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/commissions/payout-requests/{{payoutRequestId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"commissions",
								"payout-requests",
								"{{payoutRequestId}}"
							]
						}
					}
				},
				{
					"name": "Run Weekly Payout (Admin)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/commissions/payouts/weekly",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"commissions",
								"payouts",
								"weekly"
							]
						}
					}
				},
				{
					"name": "Technician Dashboard (NEW Dec 3)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/technician/dashboard",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technician",
								"dashboard"
							]
						},
						"description": "âœ… NEW (Dec 3, 2025) - Technician Dashboard Statistics\n\n**Response Structure:**\n```json\n{\n  \"thisWeekBonus\": 5400,\n  \"jobsToday\": 2,\n  \"activeJobs\": 1,\n  \"completedThisMonth\": 28,\n  \"inProgress\": 1,\n  \"readyToStart\": 2\n}\n```\n\n**Field Descriptions:**\n- `thisWeekBonus`: Total bonus/commission earned this week ($5,400)\n- `jobsToday`: Number of jobs scheduled for today (2)\n- `activeJobs`: Jobs currently in progress or accepted (1)\n- `completedThisMonth`: Total jobs completed this month (28)\n- `inProgress`: Jobs with IN_PROGRESS status (1)\n- `readyToStart`: Jobs with ASSIGNED status (2)\n\n**UI Display:**\n```\nðŸ“Š This Month Breakdown\n\nJobs Completed\n28 jobs                    $6,450\n\nCommission\nEarnings rate              $5,400\n\nTotal                      $11,850\n```\n\n**Authorization:** Technician only (TECH_FREELANCER, TECH_INTERNAL)\n\n**Status:** âœ… PRODUCTION READY (Added Dec 3, 2025)"
					}
				},
				{
					"name": "Technician Jobs by Status (NEW Dec 3)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/technician/jobs?status=incoming",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technician",
								"jobs"
							],
							"query": [
								{
									"key": "status",
									"value": "incoming",
									"description": "incoming | active | done"
								}
							]
						},
						"description": "âœ… NEW (Dec 3, 2025) - Get technician jobs filtered by status\n\n**Query Parameter: status**\n- `incoming`: ASSIGNED jobs (ready to accept)\n- `active`: ACCEPTED or IN_PROGRESS jobs\n- `done`: COMPLETED or PAID_VERIFIED jobs\n\n**Response Structure:**\n```json\n[\n  {\n    \"id\": 2,\n    \"woNumber\": \"WO-1234567891\",\n    \"status\": \"IN_PROGRESS\",\n    \"priority\": \"HIGH\",\n    \"scheduledAt\": \"2025-12-03T00:00:00.000Z\",\n    \"customer\": {\n      \"name\": \"Jane Smith\",\n      \"phone\": \"8888888888\"\n    },\n    \"service\": {\n      \"name\": \"HVAC Repair\"\n    },\n    \"category\": {\n      \"name\": \"HVAC\"\n    },\n    \"address\": \"789 Smith Road, Nairobi\",\n    \"latitude\": 23.8103,\n    \"longitude\": 90.4125,\n    \"estimatedDuration\": 60,\n    \"bonusCalculation\": {\n      \"baseRate\": 900,\n      \"rate\": 0.4,\n      \"bonus\": 360,\n      \"rateDisplay\": \"40% Commission\"\n    }\n  }\n]\n```\n\n**Features:**\n- Shows calculated bonus for each job\n- Includes customer and service details\n- Filtered by technician's assignments\n- Sorted by scheduled date\n- GPS coordinates included for navigation\n\n**UI Display - Task Card:**\n```\nðŸ”§ HVAC Repair\n\nðŸ‘¤ Jane Smith\nðŸ“ž +880 888 888 8888\n\nðŸ“ 789 Smith Road, Nairobi\nðŸ“… Today at 2:00 PM\n\nðŸ’° Your Commission: $360\n   (40% of $900)\n\n[Accept Job] [View Details]\n```\n\n**Authorization:** Technician only (TECH_FREELANCER, TECH_INTERNAL)\n\n**Status:** âœ… PRODUCTION READY (Added Dec 3, 2025)"
					}
				},
				{
					"name": "Technician Earnings Summary (NEW Dec 3)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/technician/earnings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technician",
								"earnings"
							]
						},
						"description": "âœ… NEW (Dec 3, 2025) - Complete Earnings Summary with Breakdown\n\n**Response Structure:**\n```json\n{\n  \"totalBonuses\": {\n    \"amount\": 12500,\n    \"increaseRate\": 25.5,\n    \"increaseText\": \"+25.5% from last month\"\n  },\n  \"breakdown\": {\n    \"today\": 1800,\n    \"thisWeek\": 5400,\n    \"thisWeekPercentage\": 40,\n    \"thisMonth\": 12500\n  },\n  \"availableBonus\": {\n    \"amount\": 5400,\n    \"jobsCount\": 6,\n    \"jobsText\": \"6 jobs\",\n    \"bonusText\": \"40% bonus\",\n    \"payoutInfo\": \"Regular payout: Every Monday\"\n  },\n  \"bonusRate\": {\n    \"rate\": 0.4,\n    \"ratePercentage\": 40,\n    \"type\": \"Commission\",\n    \"description\": \"Earn 40% commission on every verified job completion...\"\n  },\n  \"monthlySalary\": {\n    \"baseSalary\": 0,\n    \"thisMonthBonus\": 12500,\n    \"total\": 12500,\n    \"isFreelancer\": true\n  },\n  \"recentBonuses\": [\n    {\n      \"id\": 1,\n      \"jobName\": \"HVAC Repair\",\n      \"customerName\": \"Michael Johnson\",\n      \"date\": \"2025-12-03T14:00:00Z\",\n      \"jobPayment\": 900,\n      \"bonus\": 360,\n      \"status\": \"BOOKED\",\n      \"woNumber\": \"WO-1234567891\"\n    }\n  ]\n}\n```\n\n**Field Descriptions:**\n\n**totalBonuses:**\n- All-time earnings with month-over-month growth rate\n\n**breakdown:**\n- Today, this week, this month earnings\n- Current bonus/commission percentage\n\n**availableBonus:**\n- This week's earnings available for payout\n- Number of jobs contributing to bonus\n- Payout schedule information\n\n**bonusRate:**\n- Current commission/bonus rate\n- Type (Commission for freelancers, Bonus for internal)\n- Detailed description\n\n**monthlySalary:**\n- Base salary (internal staff only)\n- This month's bonus earnings\n- Total monthly earnings\n\n**recentBonuses:**\n- Last 10 bonus transactions\n- Job details, customer, payment amounts\n\n**UI Display:**\n```\nðŸ’° Total Bonuses: $12,500\n   +25.5% from last month\n\nðŸ“Š Breakdown:\n   Today: $1,800\n   This Week: $5,400 (40%)\n   This Month: $12,500\n\nðŸ“… Recent Transactions:\n   HVAC Repair - Michael Johnson\n   Today, 2:00 PM - $360\n```\n\n**Authorization:** Technician only (TECH_FREELANCER, TECH_INTERNAL)\n\n**Status:** âœ… PRODUCTION READY (Added Dec 3, 2025)"
					}
				},
				{
					"name": "Technician Work History (NEW Dec 4)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/technician/work-history",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technician",
								"work-history"
							]
						},
						"description": "âœ… NEW (Dec 4, 2025) - Complete Work History\n\n**UI: Work History Section** (Profile Screen)\n\nDisplays complete work history with all completed jobs:\n```\nWork History    â†’\nView\n```\n\n**API Response:**\n```json\n{\n  \"summary\": {\n    \"totalJobs\": 45,\n    \"totalEarnings\": 8500,\n    \"averageRating\": 4.7,\n    \"totalReviews\": 38\n  },\n  \"workOrders\": [\n    {\n      \"id\": 1,\n      \"woNumber\": \"WO-1234567890\",\n      \"completedAt\": \"2025-12-04T14:30:00Z\",\n      \"status\": \"PAID_VERIFIED\",\n      \"customer\": {\n        \"id\": 3,\n        \"name\": \"Jane Smith\",\n        \"phone\": \"8888888888\"\n      },\n      \"category\": {\n        \"id\": 1,\n        \"name\": \"HVAC Services\"\n      },\n      \"service\": {\n        \"id\": 1,\n        \"name\": \"AC Repair\"\n      },\n      \"subservice\": {\n        \"id\": 1,\n        \"name\": \"AC Not Cooling\"\n      },\n      \"address\": \"123 Main St, City\",\n      \"payment\": {\n        \"amount\": 500,\n        \"status\": \"VERIFIED\",\n        \"verifiedAt\": \"2025-12-04T15:00:00Z\"\n      },\n      \"commission\": {\n        \"amount\": 200,\n        \"status\": \"EARNED\"\n      },\n      \"review\": {\n        \"id\": 1,\n        \"rating\": 5,\n        \"comment\": \"Excellent service!\",\n        \"createdAt\": \"2025-12-04T16:00:00Z\"\n      },\n      \"notes\": \"Replaced compressor and cleaned filters\"\n    }\n  ]\n}\n```\n\n**Features:**\n- Complete work history with all completed jobs\n- Summary statistics (total jobs, earnings, ratings)\n- Detailed job information\n- Customer details and contact\n- Service hierarchy (category â†’ service â†’ subservice)\n- Payment and commission details\n- Customer reviews and ratings\n- Completion notes\n\n**UI Display:**\n```\nðŸ“Š Work History Summary\n\nTotal Jobs: 45\nTotal Earnings: $8,500\nAverage Rating: â­ 4.7 (38 reviews)\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nRecent Jobs:\n\n1. HVAC Services - AC Repair\n   WO-1234567890\n   Jane Smith | Dec 4, 2025\n   Payment: $500 | Commission: $200\n   â­â­â­â­â­ \"Excellent service!\"\n\n2. Plumbing - Pipe Repair\n   WO-1234567889\n   John Doe | Dec 3, 2025\n   Payment: $300 | Commission: $120\n   â­â­â­â­ \"Good work\"\n```\n\n**Authorization:** Technician only (TECH_INTERNAL, TECH_FREELANCER)\n\n**Status:** âœ… NEW (Dec 4, 2025)"
					}
				}
			]
		},
		{
			"name": "Categories & Services",
			"item": [
				{
					"name": "List All Categories",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/categories",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories"
							]
						},
						"description": "Get all categories with subservices and services (public endpoint)"
					}
				},
				{
					"name": "Create Category",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Cleaning Services\",\n  \"description\": \"Professional cleaning services\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/categories",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories"
							]
						},
						"description": "Create new category (Admin only)"
					}
				},
				{
					"name": "Update Category",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Category Name\",\n  \"description\": \"Updated description\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/categories/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								"1"
							]
						},
						"description": "Update category details"
					}
				},
				{
					"name": "Delete Category",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/categories/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								"1"
							]
						},
						"description": "Delete category (Admin only)"
					}
				},
				{
					"name": "Activate Category",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/categories/1/activate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								"1",
								"activate"
							]
						},
						"description": "Activate category to make it visible to customers"
					}
				},
				{
					"name": "Deactivate Category",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/categories/1/deactivate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								"1",
								"deactivate"
							]
						},
						"description": "Deactivate category to hide from customers"
					}
				},
				{
					"name": "Create Subservice",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"categoryId\": 1,\n  \"name\": \"AC Maintenance\",\n  \"description\": \"Regular AC maintenance\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/categories/subservices",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								"subservices"
							]
						},
						"description": "Create new subservice under a category"
					}
				},
				{
					"name": "Update Subservice",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Subservice\",\n  \"description\": \"Updated description\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/categories/subservices/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								"subservices",
								"1"
							]
						},
						"description": "Update subservice details"
					}
				},
				{
					"name": "Delete Subservice",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/categories/subservices/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								"subservices",
								"1"
							]
						},
						"description": "Delete subservice"
					}
				},
				{
					"name": "Create Service",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"categoryId\": 1,\n  \"subserviceId\": 1,\n  \"name\": \"AC Gas Refill\",\n  \"description\": \"Refrigerant gas refilling\",\n  \"baseRate\": 300\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/categories/services",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								"services"
							]
						},
						"description": "Create new service under a subservice"
					}
				},
				{
					"name": "Update Service",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Service\",\n  \"description\": \"Updated description\",\n  \"baseRate\": 350\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/categories/services/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								"services",
								"1"
							]
						},
						"description": "Update service details and pricing"
					}
				},
				{
					"name": "Delete Service",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/categories/services/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								"services",
								"1"
							]
						},
						"description": "Delete service"
					}
				}
			]
		},
		{
			"name": "Admin Dashboard",
			"item": [
				{
					"name": "Get Dashboard Stats",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/dashboard",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"dashboard"
							]
						},
						"description": "Get comprehensive dashboard statistics including work orders, users, payments, and commissions"
					}
				},
				{
					"name": "List All Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/users?role=TECH_FREELANCER",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							],
							"query": [
								{
									"key": "role",
									"value": "TECH_FREELANCER"
								}
							]
						},
						"description": "List all users with optional role filter"
					}
				},
				{
					"name": "Create User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"6666666666\",\n  \"password\": \"tech456\",\n  \"name\": \"New Technician\",\n  \"role\": \"TECH_FREELANCER\",\n  \"technicianProfile\": {\n    \"commissionRate\": 0.2,\n    \"bonusRate\": 0.05\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/admin/users",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						},
						"description": "Create new user with optional technician profile"
					}
				},
				{
					"name": "Update User",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Name\",\n  \"phone\": \"7777777777\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/admin/users/6",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"6"
							]
						},
						"description": "Update user basic information"
					}
				},
				{
					"name": "Block Technician",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"isBlocked\": true,\n  \"blockedReason\": \"Multiple customer complaints\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/admin/users/6/block",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"6",
								"block"
							]
						},
						"description": "Block technician from accepting new work orders"
					}
				},
				{
					"name": "Unblock Technician",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"isBlocked\": false\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/admin/users/6/block",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"6",
								"block"
							]
						},
						"description": "Unblock technician to allow accepting work orders"
					}
				},
				{
					"name": "Update Technician Profile",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"commissionRate\": 0.25,\n  \"bonusRate\": 0.07,\n  \"status\": \"ACTIVE\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/admin/users/6/profile",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"6",
								"profile"
							]
						},
						"description": "Update technician profile including commission rates and status"
					}
				},
				{
					"name": "Get Technician Locations (Map View)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/technician-locations",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"technician-locations"
							]
						},
						"description": "Get all technician locations for map visualization"
					}
				},
				{
					"name": "Get Top 5 Technicians",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/top-5-technicians",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"top-5-technicians"
							]
						},
						"description": "Get top 5 performing technicians by completed jobs and earnings"
					}
				},
				{
					"name": "Get In-Progress Work Orders",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/work-orders/in-progress",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"work-orders",
								"in-progress"
							]
						},
						"description": "Get all work orders currently in progress"
					}
				},
				{
					"name": "Get Technician Status Summary",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/technicians/status-summary",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"technicians",
								"status-summary"
							]
						},
						"description": "Get summary of technician statuses (online, offline, busy)"
					}
				},
				{
					"name": "Get Technician Stats",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/technicians/stats",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"technicians",
								"stats"
							]
						},
						"description": "Get detailed statistics for all technicians"
					}
				},
				{
					"name": "Get Work Order Audit Trail",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/work-orders/{{woId}}/audit-trail",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"work-orders",
								"{{woId}}",
								"audit-trail"
							]
						},
						"description": "Get complete audit trail for a work order"
					}
				},
				{
					"name": "Get Audit Logs",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/audit-logs?action=PAYMENT_VERIFIED",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"audit-logs"
							],
							"query": [
								{
									"key": "action",
									"value": "PAYMENT_VERIFIED"
								}
							]
						},
						"description": "Get system-wide audit logs with optional action filter"
					}
				},
				{
					"name": "Create Weekly Payout Batch",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/payouts/batch",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"payouts",
								"batch"
							]
						},
						"description": "Create weekly payout batch for all technicians with earned commissions"
					}
				}
			]
		},
		{
			"name": "Reports",
			"item": [
				{
					"name": "Work Order Report",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/reports/work-orders?startDate=2025-11-01&endDate=2025-11-30&status=PAID_VERIFIED",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"reports",
								"work-orders"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2025-11-01"
								},
								{
									"key": "endDate",
									"value": "2025-11-30"
								},
								{
									"key": "status",
									"value": "PAID_VERIFIED"
								}
							]
						}
					}
				},
				{
					"name": "Commission Report",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/reports/commissions?startDate=2025-11-01&status=PAID",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"reports",
								"commissions"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2025-11-01"
								},
								{
									"key": "status",
									"value": "PAID"
								}
							]
						}
					}
				},
				{
					"name": "Payment Report",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/reports/payments?method=MOBILE_MONEY",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"reports",
								"payments"
							],
							"query": [
								{
									"key": "method",
									"value": "MOBILE_MONEY"
								}
							]
						}
					}
				},
				{
					"name": "Technician Performance",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/reports/technician-performance?startDate=2025-11-01",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"reports",
								"technician-performance"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2025-11-01"
								}
							]
						}
					}
				},
				{
					"name": "Financial Report",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/reports/financial?startDate=2025-11-01&endDate=2025-11-30",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"reports",
								"financial"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2025-11-01"
								},
								{
									"key": "endDate",
									"value": "2025-11-30"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Notifications",
			"item": [
				{
					"name": "Get My Notifications",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is an array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Each notification has required fields\", function () {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.length > 0) {",
									"        var notification = jsonData[0];",
									"        pm.expect(notification).to.have.property('id');",
									"        pm.expect(notification).to.have.property('title');",
									"        pm.expect(notification).to.have.property('message');",
									"        pm.expect(notification).to.have.property('createdAt');",
									"        pm.expect(notification).to.have.property('createdAtFormatted');",
									"        pm.expect(notification).to.have.property('isRead');",
									"        pm.expect(notification).to.have.property('type');",
									"        pm.expect(notification).to.have.property('referenceId');",
									"    }",
									"});",
									"",
									"pm.test(\"Notification type is valid\", function () {",
									"    var jsonData = pm.response.json();",
									"    var validTypes = ['SR_CREATED', 'SR_ASSIGNED', 'SR_COMPLETED', 'SR_CANCELLED', 'TECH_ON_WAY', 'TECH_ARRIVED', 'NEW_SR_AVAILABLE'];",
									"    if (jsonData.length > 0) {",
									"        pm.expect(validTypes).to.include(jsonData[0].type);",
									"    }",
									"});",
									"",
									"pm.test(\"createdAtFormatted is human-readable\", function () {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.length > 0) {",
									"        pm.expect(jsonData[0].createdAtFormatted).to.be.a('string');",
									"        pm.expect(jsonData[0].createdAtFormatted.length).to.be.above(0);",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/notifications?unreadOnly=true",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notifications"
							],
							"query": [
								{
									"key": "unreadOnly",
									"value": "true"
								}
							]
						},
						"description": "Get notifications with all required fields: id, title, message, createdAt, createdAtFormatted, isRead, type, referenceId"
					}
				},
				{
					"name": "Get All Notifications (No Filter)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Returns both read and unread notifications\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"    if (jsonData.length > 1) {",
									"        var hasRead = jsonData.some(n => n.isRead === true);",
									"        var hasUnread = jsonData.some(n => n.isRead === false);",
									"        pm.expect(hasRead || hasUnread).to.be.true;",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/notifications",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notifications"
							]
						},
						"description": "Get all notifications without filtering by read status"
					}
				},
				{
					"name": "Mark Notification as Read",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Notification marked as read\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('message');",
									"    pm.expect(jsonData.message).to.include('marked as read');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/notifications/1/read",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notifications",
								"1",
								"read"
							]
						},
						"description": "Mark a specific notification as read"
					}
				},
				{
					"name": "Mark All as Read",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"All notifications marked as read\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('message');",
									"    pm.expect(jsonData.message).to.include('All notifications');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/notifications/read-all",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notifications",
								"read-all"
							]
						},
						"description": "Mark all notifications as read for the authenticated user"
					}
				}
			]
		},
		{
			"name": "Location (GPS)",
			"item": [
				{
					"name": "Update My Location",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"latitude\": 23.8103,\n  \"longitude\": 90.4125,\n  \"status\": \"ONLINE\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/location/update",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"location",
								"update"
							]
						}
					}
				},
				{
					"name": "Get Nearby Technicians",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/location/nearby?latitude=23.8103&longitude=90.4125&radius=5",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"location",
								"nearby"
							],
							"query": [
								{
									"key": "latitude",
									"value": "23.8103"
								},
								{
									"key": "longitude",
									"value": "90.4125"
								},
								{
									"key": "radius",
									"value": "5"
								}
							]
						}
					}
				},
				{
					"name": "Get Technician's Location",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/location/technician/6",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"location",
								"technician",
								"6"
							]
						}
					}
				},
				{
					"name": "Get ETA to Location",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/location/eta?technicianId=6&destinationLat=23.8200&destinationLng=90.4200",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"location",
								"eta"
							],
							"query": [
								{
									"key": "technicianId",
									"value": "6"
								},
								{
									"key": "destinationLat",
									"value": "23.8200"
								},
								{
									"key": "destinationLng",
									"value": "90.4200"
								}
							]
						},
						"description": "Calculate estimated time of arrival for technician to destination"
					}
				},
				{
					"name": "Get Location History",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/location/history/4?startDate=2025-11-01&endDate=2025-11-30",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"location",
								"history",
								"4"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2025-11-01"
								},
								{
									"key": "endDate",
									"value": "2025-11-30"
								}
							]
						},
						"description": "Get technician's location history for a date range (Admin/Dispatcher only)"
					}
				}
			]
		},
		{
			"name": "Call Center",
			"item": [
				{
					"name": "Login - Call Center",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"callCenterToken\", jsonData.token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"3333333333\",\n  \"password\": \"callcenter123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					}
				},
				{
					"name": "Create Customer with GPS",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"newCustomerId\", jsonData.user.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{callCenterToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"New Customer\",\n  \"phone\": \"7777777777\",\n  \"password\": \"customer123\",\n  \"homeAddress\": \"123 Main Street, Dhaka\",\n  \"latitude\": -1.286389,\n  \"longitude\": 36.817223\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/callcenter/customers",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"callcenter",
								"customers"
							]
						},
						"description": "Call center creates a new customer with manual GPS coordinates and home address"
					}
				},
				{
					"name": "Get WO Technician Info",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{callCenterToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/callcenter/wos/{{woId}}/technician",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"callcenter",
								"wos",
								"{{woId}}",
								"technician"
							]
						},
						"description": "Get assigned technician info including location, distance, and ETA for a work order"
					}
				}
			]
		},
		{
			"name": "Dispatcher",
			"item": [
				{
					"name": "Get Nearby Technicians for Job",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/dispatcher/technicians/nearby?latitude=-1.286389&longitude=36.817223&maxDistance=50&status=ONLINE",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"dispatcher",
								"technicians",
								"nearby"
							],
							"query": [
								{
									"key": "latitude",
									"value": "-1.286389",
									"description": "Job location latitude"
								},
								{
									"key": "longitude",
									"value": "36.817223",
									"description": "Job location longitude"
								},
								{
									"key": "maxDistance",
									"value": "50",
									"description": "Maximum distance in km (optional)"
								},
								{
									"key": "status",
									"value": "ONLINE",
									"description": "Filter by status (optional)"
								}
							]
						},
						"description": "Get list of technicians sorted by distance from job location with availability status and open jobs count"
					}
				},
				{
					"name": "Get Technician Workload",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/dispatcher/technicians/4/workload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"dispatcher",
								"technicians",
								"4",
								"workload"
							]
						},
						"description": "Get technician's current workload including all open work orders and summary"
					}
				}
			]
		},
		{
			"name": "Reviews & Ratings",
			"item": [
				{
					"name": "Create Review",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"woId\": \"{{woId}}\",\n  \"rating\": 5,\n  \"comment\": \"Excellent service! Technician was professional and fixed the issue quickly.\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/reviews",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"reviews"
							]
						},
						"description": "Customer creates review for completed work order (rating 1-5)"
					}
				},
				{
					"name": "Get Technician Reviews",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{techToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/reviews/technician/4",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"reviews",
								"technician",
								"4"
							]
						},
						"description": "Get all reviews for a specific technician with average rating"
					}
				},
				{
					"name": "Get Work Order Review",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/reviews/wo/{{woId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"reviews",
								"wo",
								"{{woId}}"
							]
						},
						"description": "Get review for a specific work order"
					}
				}
			]
		},
		{
			"name": "Dispatch Center",
			"item": [
				{
					"name": "Get Dispatch Overview",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/dispatch/overview",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"dispatch",
								"overview"
							]
						},
						"description": "Get dispatch center overview with real-time stats"
					}
				},
				{
					"name": "Get Technician Status",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/dispatch/technician-status",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"dispatch",
								"technician-status"
							]
						},
						"description": "Get real-time status summary of all technicians"
					}
				},
				{
					"name": "Get Recent Work Orders",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/dispatch/recent-work-orders",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"dispatch",
								"recent-work-orders"
							]
						},
						"description": "Get recent work orders for dispatch monitoring"
					}
				},
				{
					"name": "Get Technician Locations (Dispatch)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{dispatcherToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/dispatch/technician-locations",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"dispatch",
								"technician-locations"
							]
						},
						"description": "Get all technician locations for dispatch map view"
					}
				}
			]
		},
		{
			"name": "Payout Management (Admin)",
			"item": [
				{
					"name": "Get Payout Summary",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/payouts/summary",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payouts",
								"summary"
							]
						},
						"description": "Get payout dashboard summary with pending commissions, early requests, next payout date, and total paid this month.\n\n**Response:**\n- pendingCommissions: Amount and count of commissions ready for payout\n- earlyPayoutRequests: Amount and count of pending early payout requests\n- nextPayoutDate: Next Monday (YYYY-MM-DD)\n- totalPaidThisMonth: Total amount paid in current month\n\n**Admin only**"
					}
				},
				{
					"name": "Get Pending Commissions",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/payouts/pending-commissions?type=COMMISSION&search=",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payouts",
								"pending-commissions"
							],
							"query": [
								{
									"key": "type",
									"value": "COMMISSION",
									"description": "COMMISSION or BONUS (optional)"
								},
								{
									"key": "search",
									"value": "",
									"description": "Search by technician name or WO number (optional)"
								}
							]
						},
						"description": "Get list of all pending commissions and bonuses ready for weekly payout.\n\n**Query Parameters:**\n- type: Filter by COMMISSION or BONUS\n- search: Search by technician name or work order number\n\n**Response:** Array of pending commissions with work order, technician, service, payment, and amount details.\n\n**Admin only**"
					}
				},
				{
					"name": "Get Early Payout Requests",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/payouts/early-requests",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payouts",
								"early-requests"
							]
						},
						"description": "Get list of all pending early payout requests from technicians.\n\n**Response:** Array with technician info, requested amount, reason, payment method, and request date.\n\n**Admin only**"
					}
				},
				{
					"name": "Create Weekly Payout Batch",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/payouts/batches",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payouts",
								"batches"
							]
						},
						"description": "Create a new weekly payout batch for all pending commissions. Automatically groups by technician and schedules for next Monday.\n\n**Response:**\n- scheduledFor: Next Monday date\n- totalAmount: Total payout amount\n- totalCommissions: Number of commissions included\n- payouts: Array of payouts created per technician\n\n**Admin only**"
					}
				},
				{
					"name": "Get Payout Batches",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/payouts/batches?status=SCHEDULED",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payouts",
								"batches"
							],
							"query": [
								{
									"key": "status",
									"value": "SCHEDULED",
									"description": "SCHEDULED, COMPLETED, or FAILED (optional)"
								}
							]
						},
						"description": "Get list of payout batches with optional status filter.\n\n**Query Parameters:**\n- status: Filter by SCHEDULED, COMPLETED, or FAILED\n\n**Response:** Array of payout batches with technician, amount, commission count, type, status, and dates.\n\n**Admin only**"
					}
				},
				{
					"name": "Get Payout History",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/payouts/history?startDate=2025-11-01&endDate=2025-12-31",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payouts",
								"history"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2025-11-01",
									"description": "Start date YYYY-MM-DD (optional)"
								},
								{
									"key": "endDate",
									"value": "2025-12-31",
									"description": "End date YYYY-MM-DD (optional)"
								}
							]
						},
						"description": "Get completed payout history with optional date range filter.\n\n**Query Parameters:**\n- startDate: Filter from date (YYYY-MM-DD)\n- endDate: Filter to date (YYYY-MM-DD)\n\n**Response:** Array of completed payouts with technician, amount, commission count, and processed date.\n\n**Admin only**"
					}
				},
				{
					"name": "Process Payout Batch",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/payouts/batches/:id/process",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payouts",
								"batches",
								":id",
								"process"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "Payout batch ID"
								}
							]
						},
						"description": "Mark a scheduled payout batch as completed. Updates all linked commissions to PAID status.\n\n**Path Parameters:**\n- id: Payout batch ID\n\n**Response:** Updated payout with COMPLETED status and processed date.\n\n**Admin only**"
					}
				},
				{
					"name": "Approve Early Payout Request",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/payouts/early-requests/:id/approve",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payouts",
								"early-requests",
								":id",
								"approve"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "Early payout request ID"
								}
							]
						},
						"description": "Approve and process an early payout request. Creates immediate payout and updates commissions to PAID.\n\n**Path Parameters:**\n- id: Payout request ID\n\n**Response:** Created payout with COMPLETED status.\n\n**Admin only**"
					}
				},
				{
					"name": "Reject Early Payout Request",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/payouts/early-requests/:id/reject",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"payouts",
								"early-requests",
								":id",
								"reject"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "Early payout request ID"
								}
							]
						},
						"description": "Reject an early payout request.\n\n**Path Parameters:**\n- id: Payout request ID\n\n**Response:** Updated request with REJECTED status.\n\n**Admin only**"
					}
				}
			]
		},
		{
			"name": "Technician Management (Admin)",
			"item": [
				{
					"name": "Get Technician Overview",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/technicians/overview?specialization=All",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technicians",
								"overview"
							],
							"query": [
								{
									"key": "specialization",
									"value": "All",
									"description": "All, Electrical, General, HVAC, or Plumbing"
								}
							]
						},
						"description": "Get technician overview statistics with distribution by specialization and employment type.\n\n**Query Parameters:**\n- specialization: Filter by All, Electrical, General, HVAC, or Plumbing\n\n**Response:**\n- total: Total technician count\n- bySpecialization: Count by each specialization\n- byType: Count by FREELANCER and INTERNAL\n- specializationPercentages: Percentage breakdown for pie chart\n\n**Admin only**"
					}
				},
				{
					"name": "Get Technicians Directory",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/technicians/directory?search=&specialization=All&type=All&status=ACTIVE",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technicians",
								"directory"
							],
							"query": [
								{
									"key": "search",
									"value": "",
									"description": "Search by name, phone, or email"
								},
								{
									"key": "specialization",
									"value": "All",
									"description": "Filter by specialization"
								},
								{
									"key": "type",
									"value": "All",
									"description": "FREELANCER or INTERNAL"
								},
								{
									"key": "status",
									"value": "ACTIVE",
									"description": "ACTIVE or INACTIVE"
								}
							]
						},
						"description": "Get paginated list of all technicians with filtering and search.\n\n**Query Parameters:**\n- search: Search by name, phone, or email\n- specialization: Filter by specialization\n- type: Filter by FREELANCER or INTERNAL\n- status: Filter by ACTIVE or INACTIVE\n\n**Response:** Array of technicians with full details including rates, work statistics, and contact info.\n\n**Admin only**"
					}
				},
				{
					"name": "Get Technician Details",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/technicians/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technicians",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "Technician user ID"
								}
							]
						},
						"description": "Get detailed information about a specific technician including profile, documents, work history, and recent commissions.\n\n**Path Parameters:**\n- id: Technician user ID\n\n**Response:** Complete technician profile with statistics, recent work orders, and commission history.\n\n**Admin only**"
					}
				},
				{
					"name": "Create Technician",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Ahmed Hassan\",\n  \"phone\": \"+971501111111\",\n  \"email\": \"ahmed@serviopro.com\",\n  \"joinDate\": \"2025-12-09\",\n  \"specialization\": \"Electrical\",\n  \"type\": \"Freelancer\",\n  \"commissionRate\": 0.10,\n  \"homeAddress\": \"Dubai Marina\",\n  \"academicTitle\": \"BSc. Electrical Engineering\",\n  \"isForeigner\": false\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/technicians",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technicians"
							]
						},
						"description": "Create a new technician (freelancer or employee).\n\n**Request Body:**\n- name: Full name (required)\n- phone: Phone number (required, must be unique)\n- email: Email address (optional)\n- joinDate: Join date ISO format (optional)\n- specialization: ELECTRICAL, GENERAL, HVAC, or PLUMBING (required)\n- type: FREELANCER or INTERNAL (required)\n- commissionRate: 0.0 to 1.0 for freelancers (optional, defaults to global rate)\n- bonusRate: 0.0 to 1.0 for employees (optional, defaults to global rate)\n- baseSalary: Monthly salary for employees (optional)\n- homeAddress: Home address (optional)\n- academicTitle: Academic qualifications (optional)\n- isForeigner: Requires residence permit (optional, default: false)\n\n**Response:** Created technician with temporary password.\n\n**Admin only**"
					}
				},
				{
					"name": "Update Technician",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Ahmed Hassan (Updated)\",\n  \"email\": \"ahmed.updated@serviopro.com\",\n  \"commissionRate\": 0.12,\n  \"academicTitle\": \"BSc. MSc. Electrical Engineering\",\n  \"status\": \"ACTIVE\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/technicians/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technicians",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "Technician user ID"
								}
							]
						},
						"description": "Update technician information.\n\n**Path Parameters:**\n- id: Technician user ID\n\n**Request Body (all optional):**\n- name: Full name\n- email: Email address\n- specialization: ELECTRICAL, GENERAL, HVAC, or PLUMBING\n- commissionRate: 0.0 to 1.0\n- bonusRate: 0.0 to 1.0\n- baseSalary: Monthly salary\n- homeAddress: Home address\n- academicTitle: Academic qualifications\n- status: ACTIVE or INACTIVE\n\n**Response:** Updated technician details.\n\n**Admin only**"
					}
				},
				{
					"name": "Block/Unblock Technician",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"isBlocked\": true,\n  \"reason\": \"Policy violation - unprofessional behavior\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/technicians/:id/block",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technicians",
								":id",
								"block"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "Technician user ID"
								}
							]
						},
						"description": "Block or unblock a technician.\n\n**Path Parameters:**\n- id: Technician user ID\n\n**Request Body:**\n- isBlocked: true to block, false to unblock (required)\n- reason: Reason for blocking (required when isBlocked=true)\n\n**Response:** Updated technician with block status.\n\n**Admin only**"
					}
				},
				{
					"name": "Upload Technician Documents",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "photoUrl",
									"type": "file",
									"src": [],
									"description": "Personal photo (max 5MB)"
								},
								{
									"key": "idCardUrl",
									"type": "file",
									"src": [],
									"description": "ID card/passport (max 5MB)"
								},
								{
									"key": "residencePermitUrl",
									"type": "file",
									"src": [],
									"description": "Residence permit (max 5MB)"
								},
								{
									"key": "degreesUrl",
									"type": "file",
									"src": [],
									"description": "Degrees/certificates (max 5 files, 5MB each)"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/technicians/:id/documents",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technicians",
								":id",
								"documents"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "Technician user ID"
								}
							]
						},
						"description": "Upload technician documents (photo, ID, permits, degrees).\n\n**Content-Type:** multipart/form-data\n\n**Form Fields:**\n- photoUrl: Personal photo (image/jpeg, image/png, image/webp, max 5MB)\n- idCardUrl: ID card or passport (image/jpeg, image/png, application/pdf, max 5MB)\n- residencePermitUrl: Residence permit for foreigners (image/jpeg, image/png, application/pdf, max 5MB)\n- degreesUrl: Academic degrees and certificates (max 5 files, 5MB each)\n\n**Response:** Updated profile with document URLs.\n\n**Admin only**"
					}
				},
				{
					"name": "Export Technicians CSV",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/technicians/export?specialization=All&type=All",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"technicians",
								"export"
							],
							"query": [
								{
									"key": "specialization",
									"value": "All",
									"description": "Filter by specialization"
								},
								{
									"key": "type",
									"value": "All",
									"description": "Filter by FREELANCER or INTERNAL"
								}
							]
						},
						"description": "Export technicians data to CSV file.\n\n**Query Parameters:**\n- specialization: Filter by specialization (optional)\n- type: Filter by FREELANCER or INTERNAL (optional)\n\n**Response:** CSV file download with technician data.\n\n**Headers:** ID, Name, Phone, Email, Specialization, Type, Status, Commission Rate, Bonus Rate, Base Salary, Total Jobs, Join Date\n\n**Admin only**"
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:4000",
			"type": "string"
		},
		{
			"key": "imageUploadServiceUrl",
			"value": "https://img.mtscorporate.com",
			"type": "string"
		},
		{
			"key": "srId",
			"value": "",
			"type": "string"
		},
		{
			"key": "woId",
			"value": "",
			"type": "string"
		},
		{
			"key": "paymentId",
			"value": "",
			"type": "string"
		},
		{
			"key": "payoutRequestId",
			"value": "",
			"type": "string"
		},
		{
			"key": "adminToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "dispatcherToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "techToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "customerToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "callCenterToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "newCustomerId",
			"value": "",
			"type": "string"
		},
		{
			"key": "srNumber",
			"value": "",
			"type": "string"
		},
		{
			"key": "woNumber",
			"value": "",
			"type": "string"
		}
	]
}